<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <link
      href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'
      rel='stylesheet'
      integrity='sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3'
      crossorigin='anonymous'
    />
    <title>F1 App</title>
    <link rel='stylesheet' href='/stylesheets/styles.css' />
  </head>
  <body>
    <nav class='navbar navbar-expand-lg navbar-light'>
      <div class='container-fluid'>
        <a class='navbar-brand' href='/'>Formula 1 App</a>
        <button
          class='navbar-toggler'
          type='button'
          data-bs-toggle='collapse'
          data-bs-target='#navbarSupportedContent'
          aria-controls='navbarSupportedContent'
          aria-expanded='false'
          aria-label='Toggle navigation'
        >
          <span class='navbar-toggler-icon'></span>
        </button>
        <div class='collapse navbar-collapse' id='navbarSupportedContent'>
          <ul class='navbar-nav me-auto mb-2 mb-lg-0'>
            {{#if isAuthenticated}}
              <li class='nav-item'>
                <a class='nav-link' href='/user/profile'>My Profile</a>
              </li>
              <li class='nav-item'>
                <a class='nav-link' href='/drivers/allDrivers'>Drivers</a>
              </li>
               <li class='nav-item'>
                <a class='nav-link' href='/teams'>Teams</a>
              </li>
              <li class='nav-item'>
                <a class='nav-link' href='/grand-prix'>Grand Prix</a>
              </li>
              <li class='nav-item'>
                <a class='nav-link' href='/logout'>Log Out</a>
              </li>
            {{else}}
               <li class='nav-item'>
                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#loginModal">Log In</button>
              </li> 
              <li class='nav-item'>
                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#signupModal">Sign Up</button>
              </li>
            {{/if}}
          </ul>
        </div>
      </div>
    </nav>
    {{!-- Log In Modal --}}
    <div
      class='modal fade'
      id='loginModal'
      tabindex='-1'
      aria-labelledby='loginModalLabel'
      aria-hidden='true'
    >
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button
              type='button'
              class='btn-close'
              data-bs-dismiss='modal'
              aria-label='Close'
            ></button>
          </div>
          <div class="modal-body">
            <form action="/login" method="post">
            <label for="inputEmail" class="form-label">Email:</label>
            <input type="email" name="email" class="form-control" id="inputEmail" placeholder="f-alonso14@f1app.com"></input>
            <label for="inputPassword" class="form-label">Password:</label>
            <input type="password" name="password" class="form-control" id="inputPassword" placeholder="Coche123456"></input>
            <button class="btn btn-primary login-button" type="submit">Log In</button>
            </form>
            <a href="/signup">Don't have an account yet? Let's create one!</a>
            <div class='modal-footer'>
              <button
                type='button'
                class='btn btn-secondary'
                data-bs-dismiss='modal'
              >Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{!-- Sign Up Modal --}}
    <div
      class='modal fade'
      id='signupModal'
      tabindex='-1'
      aria-labelledby='signuplLabel'
      aria-hidden='true'
    >
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'>
            <h5 class="model-title">Create an account</h5>
            <button
              type='button'
              class='btn-close'
              data-bs-dismiss='modal'
              aria-label='Close'
            ></button>
          </div>
          <div class="modal-body">
            <form action="/signup" method="post">
              <label for="inputUsername" class="form-label">Username:</label>
              <input type="text" name="username" class="form-control" id="inputUsername" placeholder="Username"></input>
              <label for="inputEmail" class="form-label">Email:</label>
              <input type="email" name="email" class="form-control" id="inputEmail" placeholder="Your email"></input>
              <label for="inputPassword" class="form-label">Password:</label>
              <input type="password" name="password" class="form-control" id="inputPassword" aria-describedby="passwordHelpBlock" placeholder="Password"></input>
              <div id="passwordHelpBlock" class="form-text">Your password must be at least 8 characters long, and contain numbers, uppercase and  lowercase letters.</div>
              <label for="inputPassword" class="form-label">Repeat password:</label>
              <input type="password" name="repeatPassword" class="form-control" id="inputPassword" placeholder="Repeat password"></input>
                <button class="btn btn-primary login-button" type="submit">Sign Up</button>
            </form>
            <div class='modal-footer'>
              <button
                type='button'
                class='btn btn-secondary'
                data-bs-dismiss='modal'
              >Close</button>
            </div>
          </div>
        </div>
      </div>
  </div>

  {{#if errorMsg}}
  <p>{{errorMsg}}</p>
  {{/if}}

    {{{body}}}

    <script
      src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js'
      integrity='sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB'
      crossorigin='anonymous'
    ></script>
    <script
      src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js'
      integrity='sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13'
      crossorigin='anonymous'
    ></script>
    <script src='/js/script.js'></script>
  </body>
</html>